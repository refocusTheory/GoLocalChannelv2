!function(s){function o(e,t,o,i){0===s("#jig-toast").length&&s('<div id="jig-toast">'+t+"</div>").appendTo("body");var n=s("#jig-toast"),a=n.outerWidth();function r(e){n.css({top:e.clientY,left:e.clientX-a-10})}i.addClass("jig-no-pointer-events"),r(e),n.addClass("jig-toast-show"),$doc.on("mousemove",r),setTimeout(function(){i.removeClass("jig-no-pointer-events"),n.removeClass("jig-toast-show"),setTimeout(function(){$doc.off("mousemove",r),n.remove()},200)},o)}var t,e,i,n,a,r,c,d,l,g,u,v,f;function p(){return c[0].contentWindow.generateShortcode()}function m(e){var t=c.outerHeight()+d.outerHeight()+3,o=(e.pageY-c.offset().top)/t;c.css("flex-grow",o),d.css("flex-grow",1-o)}$doc=s(document),-1===window.location.pathname.indexOf("wp-admin/edit.php")?((t=s("#jig-wrap")).appendTo("#wpbody-content"),e=s("#jig-title"),i=s("#title"),e.val(i.val()),s("#title-prompt-text").text(JIG.add_title),e.on("input",function(){i.val(s(this).val())}),n=s("#publish"),s(".jig-primary-button-action").text(n.val()),a=s(".jig-hidden-form"),r=s("<form></form").appendTo("#jig-top"),c=s("#jig-sce"),d=s("#jig-preview"),r.attr({name:"jig-preview-form",id:"jig-preview-form",method:"post",target:"jig-preview",action:a.data("action")}).append(a.contents()),a.remove(),l=!1,window.previewJIG=function(){s("#jig-preview-shortcode").val(p()),l||(c.css("flex-grow",.66),d.css("flex-grow",.34),l=!0),r.submit()},(g=s(".jig-preview-button")).on("click",function(e){g.addClass("jig-preview-is-loading"),previewJIG(),function(){var e=localStorage.getItem("JIGManualPreviewCounter");if(null===e)e=1,localStorage.setItem("JIGManualPreviewCounter",1);else{if("disabled"===e)return;e++,localStorage.setItem("JIGManualPreviewCounter",e)}return e%10==1}()&&o(e,JIG.try_using_enter,2500,c)}),s(".jig-save-button").on("click",function(){s("#content").val(p()),n.click()}),u=s("#jig-revisions"),0!==(v=s(".misc-pub-revisions")).length&&(f=v.find("a").detach().attr("href"),u.attr({title:v.text(),href:f}),s("#jig-revisions").css("display","flex")),-1!==window.location.href.indexOf("action=edit")&&(t.addClass("jig-existing"),s(".jig-shortcode").val("[justified_image_grid gallery="+s("#post_ID").val()+"]").show().on("click",function(e){s(e.target).select(),document.execCommand("copy"),o(e,JIG.copied,1e3,c)})),window.getSavedShortcodeForJIG=function(){return s("#content").val()},window.previewLoadedForJIG=function(){g.removeClass("jig-preview-is-loading")},s("#jig-grab-hot").on("mousedown",function(e){t.addClass("jig-resizing"),$doc.on("mousemove",m)}),$doc.on("mouseup",function(){t.removeClass("jig-resizing"),$doc.off("mousemove",m)})):s(".jig-shortcode").each(function(){var t=s(this);t.val("[justified_image_grid gallery="+t.attr("grid-id")+"]").show().on("click",function(e){s(e.target).select(),document.execCommand("copy"),o(e,JIG.copied,1e3,t)})})}(jQuery);