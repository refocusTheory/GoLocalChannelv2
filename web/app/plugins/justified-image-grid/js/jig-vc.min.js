!function(c){var s;window.JIG_VC={},window.VcJustifiedImageGrid=vc.shortcode_view.extend({render:function(){return JIG_VC.obj=this,vc.add_element_block_view.$el.hasClass("vc_active")&&i(this.model.get("params")),window.VcJustifiedImageGrid.__super__.render.call(this),this},editElement:function(e){return i((JIG_VC.obj=this).model.get("params")),!1}}),void 0!==window.InlineShortcodeView&&(s=!1,jQuery(window).on("vc_build",function(){vc.add_element_block_view.$el.find('[data-element="jig_vc"]').on("click",function(){s=!0})}),window.InlineShortcodeView_jig_vc=window.InlineShortcodeView.extend({render:function(){return window.InlineShortcodeView_jig_vc.__super__.render.call(this),s&&i((JIG_VC.obj=this).model.get("params")),this},edit:function(e){return i((JIG_VC.obj=this).model.get("params")),!1},update:function(e){return s=!1,window.InlineShortcodeView_jig_vc.__super__.update.call(this,e),this}}));var l,e=ajaxurl+(-1==ajaxurl.indexOf("?")?"?":"&")+"action=jig_shortcode_editor",u=c('<iframe frameborder="0" marginwidth="0" marginheight="0"></iframe>');function i(e){var i,o,t,n,d,a,r;void 0!==e.content&&("object"==typeof l&&l.dialog("isOpen")&&(i=JIG_VC.obj,JIG_VC.hotSwap=!0,l.dialog("close"),JIG_VC.obj=i),void 0!==window.InlineShortcodeView?JIG_VC.frontend=!0:JIG_VC.frontend=!1,JIG_VC.params=e,JIG_VC.shortcodeSnapshot=e.content,"object"!=typeof l?(l=c('<div id="jig-sce-jquery-ui-dialog"></div>').append(u).appendTo("body").dialog({id:"jig-sce-jquery-ui-dialog",width:900,height:550,resizable:!1,open:function(){var e;void 0!==u[0].contentWindow.editShortcodeFromVC&&(u[0].contentWindow.editShortcodeFromVC(),u[0].contentWindow.scrollTo(0,0)),!JIG_VC.frontend||(e=c('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]')).offset().top+e.height()>c(window).height()&&e.css({top:"auto",bottom:"20px",height:"auto"}),void 0!==u[0].contentWindow.detectContext&&u[0].contentWindow.detectContext(),JIG_VC.prevObj=JIG_VC.obj},close:function(){void 0!==u[0].contentWindow.resetSCE&&u[0].contentWindow.resetSCE(),void 0===JIG_VC.shortcode&&(void 0===JIG_VC.hotSwap?JIG_VC.obj.model.save("params",{content:JIG_VC.shortcodeSnapshot}):JIG_VC.prevObj.model.save("params",{content:JIG_VC.shortcodeSnapshot})),s=!1,c('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]').removeClass("previewingShortcode").find(".ui-dialog-titlebar-collapsed").click(),JIG_VC={}}}),JIG_VC.frontend&&(o=c('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]'),t=o.height(),n=o.find(".ui-dialog-titlebar"),d=!1,r=(a=c('.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"] .ui-dialog-titlebar-close')).clone().insertBefore(a).attr("class","ui-dialog-titlebar-minimize"),c.extend(c.easing,{JIGswing:function(e){return.5-Math.cos(e*Math.PI)/2},JIGeaseInOutQuad:function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}}),r.on("click",function(){var e;c(this),d||l.is(":animated")?l.is(":animated")||(e=c(window).height(),o.offset().top+t>e&&o.css("bottom",function(){return e-o.offset().top-o.outerHeight()}).css({top:"auto",height:"auto"}),l.animate({height:l.data("originalHeight"),opacity:1},300,"JIGeaseInOutQuad",function(){o.height(t),n.removeClass("ui-dialog-titlebar-collapsed"),d=!1})):(o.css("height","auto"),l.data("originalHeight",l.height()),n.addClass("ui-dialog-titlebar-collapsed"),l.animate({height:0,opacity:0},300,"JIGeaseInOutQuad",function(){d=!0}))}))):l.dialog("open"))}u.attr({src:e}),c("body").on("click",'.ui-dialog[aria-describedby="jig-sce-jquery-ui-dialog"]',function(e){c(e.target).is(".ui-dialog")&&l.dialog("close")})}(jQuery);