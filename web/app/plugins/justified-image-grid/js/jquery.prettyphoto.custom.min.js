/*! ------------------------------------------------------------------------
    @preserve
	Class: prettyPhoto
	Use: Lightbox clone for jQuery
	Author: Stephane Caron (http://www.no-margin-for-errors.com)
	Version: 3.1.6
	Customization: by Firsh for Justified Image Grid
------------------------------------------------------------------------- */
function loadJIGprettyPhoto(G){function S(){var e,t=!1;return null!==(e=location.hash.replace("%5B","[").replace("%5D","]").replace(/([^|])(poster=|videoplayer)/gm,"$1|$2").match(/^#!?([\w\-[\]]+?\/(?:(\d+)(?=\/))?(https?:\/\/[^&]*)?([A-Z]{2}\/[_\w]*)?)/im))&&(t=e[1]),t}function E(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null==i?"":i[1]}G.prettyPhoto={version:"3.1.6"},G.prettyPhoto.JIG=!0,G.fn.prettyPhoto=function(l){var e,s,n,r;jigReCallPrettyPhotoAfterPossibleResize=void 0===l||void 0!==l&&void 0===l.jig_call||void 0,!1===(l=jQuery.extend({jig_call:!1,jig_socials:"ftp",title_position:"inside",videoplayer:!1,hook:"rel",advanced_deeplinking:!1,smart_deeplinking:!0,animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:300,keyboard_shortcuts:!0,analytics:!1,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"> <div class="ppt">&nbsp;</div> <div class="pp_top"> <div class="pp_left"></div> <div class="pp_middle"></div> <div class="pp_right"></div> </div> <div class="pp_content_container"> <div class="pp_left"> <div class="pp_right"> <div class="pp_content"> <div class="pp_loaderIcon"></div> <div class="pp_fade"> <a href="#" class="pp_expand" title="Expand the image">Expand</a> <div class="pp_hoverContainer"> <a class="pp_next" href="#">next</a> <a class="pp_previous" href="#">previous</a> </div> <div id="pp_full_res"></div> <div class="pp_details"> <div class="pp_nav"> <a href="#" class="pp_arrow_previous">Previous</a> <a href="#" class="pp_arrow_next">Next</a> <p class="currentTextHolder">0/0</p> </div> <p class="pp_description"></p> <div class="pp_bottom_right"> <a class="pp_close" href="#">Close</a> <div class="pp_social">{pp_social}</div> </div> </div> </div> </div> </div> </div> </div> <div class="pp_bottom"> <div class="pp_left"></div> <div class="pp_middle"></div> <div class="pp_right"></div> </div> </div> <div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> <a href="#" class="pp_arrow_previous">Previous</a> <div> <ul> {gallery} </ul> </div> <a href="#" class="pp_arrow_next">Next</a> </div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no" allowfullscreen></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:!0,jig_facebook:'<div class="jig_pp_social_btn jig_pp_facebook" data-src="//www.facebook.com/plugins/like.php?href={f_location_href}&amp;width=135&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=true&amp;height=21"></div>',jig_twitter:'<div class="jig_pp_social_btn jig_pp_twitter" data-src="//platform.twitter.com/widgets/tweet_button.html?url={location_href}&text={twitter_text}"></div>',jig_pinterest:'<div class="jig_pp_social_btn jig_pp_pinterest" data-href="//www.pinterest.com/pin/create/button/?url={location_href}&media={location_img}&description={d}"></div>'},l)).jig_call&&!0===l.smart_deeplinking&&!0===l.deeplinking&&(l.smart_deeplinking=!1,l.advanced_deeplinking=!0),l.social_tools&&(e=(e=(e=(e=l.jig_socials).toLowerCase()).replace(/[^ftp]/gi,"")).split(""),s=G.inArray("f",e),n=G.inArray("t",e),r=G.inArray("p",e),-1!==s&&(e[s]=l.jig_facebook),-1!==n&&(e[n]=l.jig_twitter),-1!==r&&(e[r]=l.jig_pinterest,void 0===window.jigBuildPinterestButton&&(window.jigBuildPinterestButton=function(e){setTimeout(function(){window.jigBuildPinterestButton(e)},500)}),!0===l.jig_call&&void 0===window.jigPinterestTrickRan&&(window.jigPinterestTrick(),G(window).off("load",window.jigPinterestTrick).on("load",window.jigPinterestTrick))),l.social_tools=e.join(""));var d,p,c,_,h,g,t,i,o,a,m,f,u,v,w,y=this,b=!1,k=G(window).height(),P=G(window).width();function j(e,i){return e=function(e,t){if(void 0===e)return"";var i=0,p=!1;void 0===t&&(t=2),e=e.toString().replace(/&lt;/g,"<").replace(/&gt;/g,">");var o={ENT_NOQUOTES:0,ENT_HTML_QUOTE_SINGLE:1,ENT_HTML_QUOTE_DOUBLE:2,ENT_COMPAT:2,ENT_QUOTES:3,ENT_IGNORE:4};if(0===t&&(p=!0),"number"!=typeof t){for(var a=0,s=(t=[].concat(t)).length;a<s;a+=1)0===o[t[a]]?p=!0:o[t[a]]&&(i|=o[t[a]]);t=i}return t&o.ENT_HTML_QUOTE_SINGLE&&(e=e.replace(/&#0*39;/g,"'")),p||(e=e.replace(/&quot;/g,'"')),e.replace(/&amp;/g,"&")}(e),i=(((i||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(e,t){return-1<i.indexOf("<"+t.toLowerCase()+">")?e:""})}function $(){G(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(k/2-d.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1,"JIGswing"),$pp_pic_holder.find(".pp_content").animate({height:d.imageHeight,width:d.imageWidth},settings.animation_speed,"JIGeaseInOutQuad"),$pp_pic_holder.animate({top:projectedTop,left:P/2-d.containerWidth/2<0?0:P/2-d.containerWidth/2,width:d.containerWidth},settings.animation_speed,"JIGeaseInOutQuad",function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(d.height).width(d.width),$pp_pic_holder.find(".pp_fade").fadeIn({duration:settings.animation_speed,easing:"JIGswing",complete:function(){var e,t,i,p,o,a;settings.social_tools&&(-1!==s&&(o=G(".jig_pp_facebook"),a=G('<iframe src="'+o.data("src")+'" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:135px; height:21px;" allowTransparency="true"></iframe>'),o.empty().append(a)),-1!==n&&(i=G(".jig_pp_twitter"),p=G('<iframe src="'+i.data("src")+'" width="61" height="20" title="Twitter Tweet Button" style="border: 0; overflow: hidden;" scrolling="no"></iframe>'),i.empty().append(p)),-1!==r&&(e=jQuery(".jig_pp_pinterest"),t=jQuery('<a href="'+e.data("href")+'" class="pin-it-button" data-pin-do="buttonPin" data-pin-config="beside" data-pin-save="true"></a>'),e.empty().append(t),window.jigBuildPinterestButton(e[0]),function e(){var t,i,p,o=G(".jig_pp_pinterest"),a=G(".pp_bottom_right");-1===W&&(W=G(".pp_details .pp_social").height()),-1===M&&0!==a.length&&(M=a.position().top),0!==o.length&&(void 0!==(t=o.find("> a")).attr("data-pin-log")?((p=0)!==(i=t.find("> span")).length&&0<(p=Math.abs(parseInt(i.css("right"),10)))&&t.css("margin-right",p),G(".jig_pp_pinterest").addClass("jig_pp_measured_pinterest"),0!==a.length&&M<a.position().top?G(".pp_content").height(G(".pp_content").height()+a.position().top-M):W<G(".pp_details .pp_social").height()&&G(".pp_content").height(G(".pp_content").height()+G(".pp_details .pp_social").height()-W),void 0!==z&&(B=0,clearTimeout(z)),M=W=-1):B<30&&(z=setTimeout(function(){B++,e()},200)))}()))}}),isSet&&"image"==O(pp_images[set_position])&&1<pp_images.length?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(d.resized?G("a.pp_expand,a.pp_contract").show():G("a.pp_expand").hide()),!settings.autoplay_slideshow||t||p||G.prettyPhoto.startSlideshow(),settings.changepicturecallback(),p=!0}),isSet&&settings.overlay_gallery&&"image"==O(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((d.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div").first().width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,G.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.eq(set_position).addClass("selected")):$pp_pic_holder.find(".pp_content").off("mouseenter mouseleave"),l.ajaxcallback()}function x(e){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut({duration:settings.animation_speed,easing:"JIGswing",complete:function(){G(".pp_loaderIcon").show(),e()}})}function I(e,t){T(e,t),s=!1;var i=P-50,p=k-40,o=e,a=t;if((i<g||p<h)&&doresize&&settings.allow_resize&&!b)for(var s=!0,n=!0,r=!1;n;)i<g&&(a=t/e*(o=Math.min(i,o)-20),o<200&&(a=t/e*(o=200),r=!(n=!1))),p<h&&(o=e/t*(a=Math.min(p,a)-20),a<200&&(o=e/t*(a=200),r=!(n=!1))),T(o,a),n=0==r&&(i<g||p<h);return A(),{width:Math.floor(o),height:Math.floor(a),containerHeight:Math.floor(h),containerWidth:Math.floor(g)+2*settings.horizontal_padding,imageHeight:Math.floor(c),imageWidth:Math.floor(_),resized:s}}function T(e,t){e=parseFloat(e),t=parseFloat(t),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(e);var i,p=0,o="facebook"!==settings.theme?settings.theme:"pp_facebook",a=G('<div class="prettyPhotoTemporaryMeasure"><div class="pp_content_container"></div></div>').addClass(o).css({position:"absolute",top:-1e4}).appendTo("body");$pp_details=$pp_details.clone().width(e).appendTo(a.find(".pp_content_container")),"inside"==settings.title_position&&(G(".pp_details.pp_includes_title").removeClass("pp_alt_x_position pp_alt_br_position pp_socials_own_line"),G(".pp_details .pp_nav, .pp_details .pp_description, .pp_details .pp_bottom_right").removeAttr("style"),0!==(i=$pp_details.find(".pp_description:visible")).length&&0===i.position().left?(G(".pp_details .pp_description").css("margin-right",0).prev().css("margin-right",48),$pp_details.find(".pp_social").outerWidth(!0)<$pp_details.width()-$pp_details.find(".pp_nav").outerWidth(!0)?G(".pp_details.pp_includes_title").addClass("pp_alt_br_position"):G(".pp_details.pp_includes_title").addClass("pp_alt_x_position")):$pp_details.find(".pp_bottom_right").position().top&&(0===i.length||30<$pp_details.find(".pp_social").height()?G(".pp_details.pp_includes_title").addClass("pp_alt_x_position"):G(".pp_details .pp_description").css("margin-right",0),G(".pp_details .pp_bottom_right").css("float","none"),1==$pp_details.find(".pp_social").length&&G(".pp_details.pp_includes_title").addClass("pp_socials_own_line"))),p=(p+=a.outerHeight(!0))<=34?36:p,a.remove(),titleHeight=0,"inside"!==settings.title_position&&($pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(e),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(G("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove()),_=e,h=(c=t+p)+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),g=e}function O(e){return e.match(/\b\|videoplayer\b/i)?"videoplayer":e.match(/youtube\.com\/watch/i)||e.match(/youtu\.be/i)?"youtube":e.match(/vimeo\.com/i)?"vimeo":e.match(/\b.mov\b/i)?"quicktime":e.match(/\b.swf\b/i)?"flash":e.match(/\biframe=true\b/i)?"iframe":e.match(/\bajax=true\b/i)?"ajax":e.match(/\bcustom=true\b/i)?"custom":"#"==e.substr(0,1)?"inline":"image"}function A(){if(doresize&&"undefined"!=typeof $pp_pic_holder){scroll_pos=C();var e=$pp_pic_holder.height(),t=$pp_pic_holder.width();if(projectedTop=k/2+scroll_pos.scrollTop-e/2,projectedTop<0&&(projectedTop=0),k<e)return;$pp_pic_holder.css({top:projectedTop,left:P/2+scroll_pos.scrollLeft-t/2})}}function C(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function R(){if(settings.markup=settings.markup.replace("{pp_social}",""),G("body").append(settings.markup),$pp_pic_holder=G(".pp_pic_holder"),$ppt=G(".ppt"),$pp_overlay=G("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var e=0;e<pp_images.length;e++)pp_images[e].match(/\b(jpg|jpeg|png|webp|bmp|gif)\b/gi)?(classname="",void 0!==i?(img_src=i.find('a.jig-link[href="'+pp_images[e]+'"]:not(.jig-hiddenLink) img').eq(0).attr("src"),"undefined"!=typeof img_src&&"data:"!==img_src.substr(0,5)||(img_src=pp_images[e])):img_src=pp_images[e]):(classname=' class="default"',img_src=""),toInject+="<li"+classname+'><a href="#"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" style="background-image: url('+img_src+');" alt="'+encodeURIComponent(j(pp_titles[e].replace(/<a(?:.+?)href=['"](.+?)['"](?:.+?>)(.+?)(?:<\/a>)/gm,"$2: $1")))+'" /></a></li>';toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=G(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return G.prettyPhoto.changeGalleryPage("next"),G.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return G.prettyPhoto.changeGalleryPage("previous"),G.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn({duration:400,easing:"JIGswing"})},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut({duration:400,easing:"JIGswing"})}),itemWidth=57,$pp_gallery_li.each(function(e){G(this).find("a").click(function(){return G.prettyPhoto.changePage(e),G.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return G.prettyPhoto.startSlideshow(),!1}));var t="facebook"!==settings.theme?settings.theme:"pp_facebook";$pp_pic_holder.attr("class","pp_pic_holder "+t),$pp_overlay.css({opacity:0,height:G(document).height(),width:G(window).width()}).on("click",function(){settings.modal||G.prettyPhoto.close()}),G("a.pp_close").on("click",function(){return G.prettyPhoto.close(),!1}),settings.allow_expand&&G("a.pp_expand").on("click",function(e){return doresize=G(this).hasClass("pp_expand")?(G(this).removeClass("pp_expand").addClass("pp_contract"),!1):(G(this).removeClass("pp_contract").addClass("pp_expand"),!0),x(function(){G.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").on("click",function(){return G.prettyPhoto.changePage("previous"),G.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").on("click",function(){return G.prettyPhoto.changePage("next"),G.prettyPhoto.stopSlideshow(),!1}),A()}return 1==l.jig_call&&(i=y.first().closest(".justified-image-grid")),doresize=!0,scroll_pos=C(),void 0!==y.selector&&-1==y.selector.indexOf("#jig")&&(y=y.filter(":not(.justified-image-grid a)")),l.matchedObjects=y,G(window).off("resize.prettyphoto").on("resize.prettyphoto",function(){k=G(window).height(),P=G(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(G(document).height()).width(P),A()}),l.keyboard_shortcuts&&G(document).off("keydown.prettyphoto").on("keydown.prettyphoto",function(e){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(e.keyCode){case 37:G.prettyPhoto.changePage("previous"),e.preventDefault();break;case 13:case 39:G.prettyPhoto.changePage("next"),e.preventDefault();break;case 27:settings.modal||G.prettyPhoto.close(),e.preventDefault()}}),G.prettyPhoto.initialize=function(){return settings=l,"pp_default"==settings.theme&&(settings.horizontal_padding=16),theRel=G(this).attr(settings.hook).split(" ").shift(),isSet=!!/\[(?:.*)\]/.exec(theRel),pp_descriptions=isSet?(pp_images=jQuery.map(y,function(e,t){if(G(e).attr(settings.hook)&&-1!=G(e).attr(settings.hook).indexOf(theRel))return G(e).attr("href")}),pp_titles=jQuery.map(y,function(e,t){if(G(e).attr(settings.hook)&&-1!=G(e).attr(settings.hook).indexOf(theRel))return G(e).find("img").attr("alt")?G(e).find("img").attr("alt"):""}),jQuery.map(y,function(e,t){if(G(e).attr(settings.hook)&&-1!=G(e).attr(settings.hook).indexOf(theRel))return G(e).attr("title")?G(e).attr("title"):""})):(pp_images=G.makeArray(G(this).attr("href")),pp_titles=G.makeArray(G(this).find("img").attr("alt")),G.makeArray(G(this).attr("title"))),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=jQuery.inArray(G(this).attr("href"),pp_images),rel_index=isSet?set_position:G("a["+settings.hook+"^='"+theRel+"']").index(G(this)),R(),settings.allow_resize&&G(window).on("scroll.prettyphoto",function(){k=G(window).height(),P=G(window).width(),A()}),G.prettyPhoto.open(),!1},G.prettyPhoto.open=function(e){"undefined"==typeof settings&&(settings=l,pp_images=G.makeArray(e),pp_titles=arguments[1]?G.makeArray(arguments[1]):G.makeArray(""),pp_descriptions=arguments[2]?G.makeArray(arguments[2]):G.makeArray(""),isSet=1<pp_images.length,set_position=arguments[3]?arguments[3]:0,R(e.target)),settings.hideflash&&G("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),1<G(pp_images).length?G(".pp_nav").removeClass("pp_nav_hidden"):G(".pp_nav").addClass("pp_nav_hidden"),G(".pp_loaderIcon").show(),settings.deeplinking&&function(e){if("undefined"!=typeof theRel){var t=!1;if(1==settings.smart_deeplinking&&e){var i="",p=e.filter("[href='"+pp_images[set_position]+"']"),o=p.attr("class");if(-1!==o.indexOf("jig-contentID")||(o=p.closest(".jig-imageContainer").attr("class")),null!=(i=/(?:jig-contentID)-(\w{2})-([^\s]*)/im.exec(o))&&(i=i[1]+"/"+i[2]),i)return location.hash="!"+theRel+"/"+i;t=!0}1==settings.advanced_deeplinking||1==t?location.hash="!"+theRel+"/"+pp_images[set_position]:location.hash=theRel+"/"+rel_index+"/"}}(settings.matchedObjects),1==settings.analytics&&"undefined"!=typeof _gaq&&_gaq.push(["_trackEvent","Photos","View",pp_images[set_position]]);var t,i,p,o,a,s="",s=1==settings.advanced_deeplinking||1==settings.smart_deeplinking?(t=(s=decodeURI(document.location.href)).split("#!"))[0]+"#!"+t[1]:location.href;settings.social_tools?(i=settings.social_tools.replace(/{location_href}/g,encodeURIComponent(location.href)),-1!==s.indexOf("?")&&(s.indexOf("?"),s.indexOf("#!")),i=i.replace(/{f_location_href}/g,encodeURIComponent(s)),p=pp_images[set_position],a="",-1!==(i=null===(o=/(?:poster=)(.*)(?:\|videoplayer)/m.exec(p))?i.replace(/{location_img}/g,encodeURIComponent(pp_images[set_position])):i.replace(/{location_img}/g,encodeURIComponent(o[1]))).indexOf("{twitter_text}")&&(i=void 0!==pp_titles[set_position]?(a=pp_titles[set_position],i.replace(/{twitter_text}/g,encodeURIComponent(j(a.replace(/<a(?:.+?)href=['"](.+?)['"](?:.+?>)(.+?)(?:<\/a>)/gm,"$2: $1"))))):i.replace(/{twitter_text}/g,encodeURIComponent(document.title))),void 0!==pp_descriptions[set_position]&&(a+=""!==a?" "+pp_descriptions[set_position]:pp_descriptions[set_position]),i=i.replace(/{d}/g,encodeURIComponent(j(a.replace(/<a(?:.+?)href=['"](.+?)['"](?:.+?>)(.+?)(?:<\/a>)/gm,"$2: $1")))),$pp_pic_holder.find(".pp_social").html(i)):$pp_pic_holder.find(".pp_social").remove(),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity,"JIGswing"),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+G(pp_images).length),"inside"==settings.title_position&&(pp_descriptions[set_position]=(settings.show_title&&""!=pp_titles[set_position]&&void 0!==pp_titles[set_position]?'<div class="ppt_inside">'+pp_titles[set_position]+"</div>":"")+(void 0!==pp_descriptions[set_position]?pp_descriptions[set_position]:""),pp_titles[set_position]=void 0,$pp_pic_holder.find(".pp_details").addClass("pp_includes_title")),void 0!==pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").html(pp_descriptions[set_position]):$pp_pic_holder.find(".pp_description").empty();var n=parseFloat(E("width",pp_images[set_position]))?E("width",pp_images[set_position]):settings.default_width.toString(),r=parseFloat(E("height",pp_images[set_position]))?E("height",pp_images[set_position]):settings.default_height.toString();return b=!1,-1!=r.indexOf("%")&&(r=parseFloat(G(window).height()*parseFloat(r)/100-150),b=!0),-1!=n.indexOf("%")&&(n=parseFloat(G(window).width()*parseFloat(n)/100-150),b=!0),$pp_pic_holder.fadeIn({duration:400,easing:"JIGswing",complete:function(){settings.show_title&&""!=pp_titles[set_position]&&void 0!==pp_titles[set_position]?$ppt.html(pp_titles[set_position]):$ppt.remove();var e="",t=!1;switch(O(pp_images[set_position])){case"image":e=new Image;var i=new Image;isSet&&set_position<G(pp_images).length-1&&(i.src=pp_images[set_position+1]);var p=new Image;isSet&&pp_images[set_position-1]&&(p.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),e.onload=function(){d=I(e.width,e.height),$()},e.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),G.prettyPhoto.close()},e.src=pp_images[set_position];break;case"youtube":d=I(n,r),movie_id=E("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],0<movie_id.indexOf("?")&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),0<movie_id.indexOf("&")&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="//www.youtube.com/embed/"+movie_id,E("rel",pp_images[set_position])?movie+="?rel="+E("rel",pp_images[set_position]):movie+="?rel=0",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,d.width).replace(/{height}/g,d.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":d=I(n,r),movie_id=pp_images[set_position];var o=movie_id.match(/https?:\/\/(?:www\.)?vimeo\.com\/(?:(\d+)|channels\/\w+?\/(\d+))/m),a=o[1]|o[2];movie="//player.vimeo.com/video/"+a+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=d.width+"/embed/?moog_width="+d.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,d.height).replace(/{path}/g,movie);break;case"quicktime":(d=I(n,r)).height+=15,d.imageHeight+=15,d.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,d.width).replace(/{height}/g,d.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":d=I(n,r),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,d.width).replace(/{height}/g,d.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":d=I(n,r),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,d.width).replace(/{height}/g,d.height).replace(/{path}/g,frame_url);break;case"videoplayer":d=I(n,r),frame_url=pp_images[set_position],!1!==settings.videoplayer&&(frame_url=settings.videoplayer+encodeURIComponent(frame_url)),toInject=settings.iframe_markup.replace(/{width}/g,d.width).replace(/{height}/g,d.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,d=I(n,r),t=doresize=!0,G.get(pp_images[set_position],function(e){toInject=settings.inline_markup.replace(/{content}/g,e),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,$()});break;case"custom":d=I(n,r),toInject=settings.custom_markup;break;case"inline":myClone=G(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(G("body")).show(),doresize=!1,d=I(G(myClone).width(),G(myClone).height()),doresize=!0,G(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,G(pp_images[set_position]).html())}e||t||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,$())}}),!1},G.prettyPhoto.changePage=function(e){currentGalleryPage=0,"previous"==e?(set_position--,set_position<0&&(set_position=G(pp_images).length-1)):"next"==e?(set_position++,set_position>G(pp_images).length-1&&(set_position=0)):set_position=e,rel_index=set_position,doresize=doresize||!0,settings.allow_expand&&G(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),x(function(){G.prettyPhoto.open()})},G.prettyPhoto.changeGalleryPage=function(e){"next"==e?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==e?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=e,slide_speed="next"==e||"previous"==e?settings.animation_speed:0,slide_to=currentGalleryPage*(itemsPerPage*itemWidth),$pp_gallery.find("ul").animate({left:-slide_to},slide_speed,"JIGeaseInOutQuad")},G.prettyPhoto.startSlideshow=function(){void 0===t?($pp_pic_holder.find(".pp_play").off("click").removeClass("pp_play").addClass("pp_pause").click(function(){return G.prettyPhoto.stopSlideshow(),!1}),t=setInterval(G.prettyPhoto.startSlideshow,settings.slideshow)):G.prettyPhoto.changePage("next")},G.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").off("click").removeClass("pp_pause").addClass("pp_play").click(function(){return G.prettyPhoto.startSlideshow(),!1}),clearInterval(t),t=void 0},G.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(G.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),G("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut({duration:settings.animation_speed,easing:"JIGswing",complete:function(){G(this).remove()}}),$pp_overlay.fadeOut({duration:settings.animation_speed,easing:"JIGswing",complete:function(){var e,t,i;settings.hideflash&&G("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),G(this).remove(),G(window).off("scroll.prettyphoto"),"undefined"!=typeof theRel&&(t=location.hash,-1===(i=(i=theRel.replace("[",")\\[")).replace("]","\\]")).indexOf(")")&&(i+=")"),e=new RegExp("^#(!?"+i+"/(\\d+?/)?(https?://.*)?([A-Z]{2}/[_w]*)?"),null!==t.match(e)&&(location.hash="!")),settings.callback(),doresize=!0,p=!1,settings=void 0}}))},!pp_alreadyInitialized&&S()&&1==l.jig_call&&(u=!1,w=(v=S()).substring(0,v.indexOf("/")),v=v.substring(v.indexOf("/")+1,v.length),1==(u=!/^([A-Z]{2}\/[_\w]*)$/im.test(v)||(v=v.replace("/","-"),0===(f=i.find(".jig-contentID-"+v).find("a["+l.hook+"^='"+w+"']").first()).length&&(f=i.find("a["+l.hook+"^='"+w+"'].jig-contentID-"+v).first()),0===f.length||(pp_alreadyInitialized=!0,G(window).one("jigPrettyPhotoActivation",function(){jigOtherPrettyPhotoIsPresent=void 0,f.trigger("click")}),!1)))&&(o=new RegExp("(^\\d+)?/?(https?://.+$)"),null!==(f=v.match(o))&&(v=f[1],m=f[2],(a=i.find("a["+l.hook+"^='"+w+"']").eq(v)).attr("href")!==m&&(a=i.find("a["+l.hook+"^='"+w+"'][href^='"+m+"']")),u=0===a.length||(pp_alreadyInitialized=!0,G(window).one("jigPrettyPhotoActivation",function(){jigOtherPrettyPhotoIsPresent=void 0,a.trigger("click")}),!1),u=!1)),1==u&&0!==i.find("a["+l.hook+"^='"+w+"']").eq(v).trigger("click").length&&(pp_alreadyInitialized=!0)),y.off("click.prettyphoto").on("click.prettyphoto",G.prettyPhoto.initialize)};var z,B=0,W=-1,M=-1;window.jigPinterestTrick=function(){var e=G('.jig_pp_social_btn.jig_pp_pinterest span[class$="_button_pin"]'),i=e.length;if(1<i&&e.each(function(e,t){e!==i-1&&G(t).remove()}),void 0===window.jigPinterestTrickRan||1!==window.jigPinterestTrickRan){for(var t,p=!(window.jigPinterestTrickRan="pending"),o=Object.keys(window),a=o.length,s=0;s<a;s+=1)try{if(-1!==o[s].indexOf("webkit"))continue;if(t=o[s],"function"==typeof window[t]&&"function (a){d.f.build(a)}"==window[t]){p=window[t];break}}catch(e){}if(0==p){for(var n,r=0;r<a;r+=1)try{if(-1!==o[r].indexOf("webkit"))continue;if(0===(t=o[r]).indexOf("PIN_"))if(12<t.length){if("function"==typeof window[t].f.build){p=window[t].f.build;break}}else p="almost"}catch(e){}!1===p?(window.jigPinterestTrickRan=1,(n=document.createElement("script")).type="text/javascript",n.async=!0,n.src="//assets.pinterest.com/js/pinit.js",n.setAttribute("data-pin-build","jigBuildPinterestButton"),G("body").append(n)):"function"==typeof p&&(window.jigPinterestTrickRan=1,window.jigBuildPinterestButton=p)}else window.jigPinterestTrickRan=1,window.jigBuildPinterestButton=p}},Object.keys||(Object.keys=function(){"use strict";var o=Object.prototype.hasOwnProperty,a=!{toString:null}.propertyIsEnumerable("toString"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=s.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,i,p=[];for(t in e)o.call(e,t)&&p.push(t);if(a)for(i=0;i<n;i++)o.call(e,s[i])&&p.push(s[i]);return p}}())}void 0!==jQuery.prettyPhoto&&(jigOtherPrettyPhotoIsPresent=!0),loadJIGprettyPhoto(jQuery),pp_alreadyInitialized=!1;